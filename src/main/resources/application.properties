# App name
spring.application.name=face-attendance

# ? JDBC Connection
spring.datasource.url=jdbc:mysql://localhost:3306/face_attendance?useUnicode=true&characterEncoding=UTF-8&serverTimezone=Asia/Ho_Chi_Minh
spring.datasource.username=taloc
spring.datasource.password=24082003


# ? Rõ ràng Driver Class
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

## ? HikariCP pool size và timeout rõ ràng (không b?t bu?c nh?ng nên có)
#spring.datasource.hikari.minimum-idle=5
#spring.datasource.hikari.maximum-pool-size=10
#spring.datasource.hikari.idle-timeout=600000
#spring.datasource.hikari.connection-timeout=30000
#spring.datasource.hikari.max-lifetime=1800000

# Charset
spring.datasource.hikari.connection-init-sql=SET NAMES utf8mb4

# ? JPA c?u hình
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.jdbc.time_zone=Asia/Ho_Chi_Minh

# Jackson timezone
spring.jackson.time-zone=Asia/Ho_Chi_Minh

# C?u hình email
# application.properties
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=thanhlocta2408@gmail.com
spring.mail.password=iqwq xpsb vsld qgfe
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true

# C?u hình Swagger
springdoc.api-docs.path=/v3/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.operationsSorter=method
springdoc.swagger-ui.tagsSorter=alpha
springdoc.swagger-ui.tryItOutEnabled=true

# Logging Configuration
logging.level.com.tathanhloc.faceattendance=DEBUG
logging.level.org.springframework.security=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# Spring Boot Admin
management.endpoint.health.show-details=always

# Thymeleaf Configuration
spring.thymeleaf.enabled=true
spring.thymeleaf.prefix=classpath:/templates/
spring.thymeleaf.suffix=.html
spring.thymeleaf.cache=false

# Static Resources
spring.web.resources.static-locations=classpath:/static/
spring.web.resources.cache.period=0

# Upload Configuration
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB
spring.servlet.multipart.enabled=true
spring.servlet.multipart.file-size-threshold=2KB
# Base64 encoded secret key for JWT
app.jwt.secret=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWUsImlhdCI6MTUxNjIzOTAyMn0.KMUFsIDTnFmyG3nMiGM6H9FNFUROf3wh7SmqJp-QV30
app.jwt.expiration=86400000
app.jwt.refresh-expiration=604800000
management.endpoints.web.exposure.include=mappings

# Application Upload Configuration
app.upload.dir=src/main/resources/static/uploads
app.upload.max-file-size=5242880
app.python.executable=face_recognition_env/bin/python
app.python.script.path=scripts/face_recognition
app.face.recognition.timeout=300

# Thêm vào file src/main/resources/application.properties

# ===============================================
# PYTHON FACE RECOGNITION CONFIGURATION
# ===============================================

# Python Script Configuration
python.script.path=scripts/face_recognition/face_feature_extractor.py
python.executable=python3

# Feature Extraction Settings
feature.extraction.timeout=300
feature.extraction.max.concurrent=3

# Python Service URLs
python.face.api.url=http://localhost:8001
python.backend.api.url=http://localhost:8080/api

# Face Recognition Settings
face.recognition.max.face.size=640
face.recognition.similarity.threshold=0.6
face.recognition.min.face.area=10000

# Student Images Directory
student.images.base.path=uploads/students

# Async Processing Configuration
async.extraction.core.pool.size=2
async.extraction.max.pool.size=5
async.extraction.queue.capacity=100

# Python Environment Check
python.environment.check.enabled=true
python.environment.check.on.startup=true

# Logging Configuration for Python Integration
logging.level.com.tathanhloc.faceattendance.service.PythonFeatureExtractionService=DEBUG

# ===============================================
# FACE RECOGNITION API CONFIGURATION
# ===============================================

# InsightFace Service Configuration
insightface.service.url=http://localhost:8001
insightface.service.timeout=30000
insightface.service.retry.attempts=3

# Model Configuration
insightface.model.name=buffalo_l
insightface.model.device=cpu
insightface.model.det.size=640,640

# Quality Thresholds
face.quality.min.det.score=0.5
face.quality.min.face.area=5000
face.quality.max.age.diff=20

# Embedding Configuration
embedding.dimension=512
embedding.similarity.method=cosine
embedding.composite.method=mean

# ===============================================
# BATCH PROCESSING CONFIGURATION
# ===============================================

# Batch Processing Settings
batch.processing.enabled=true
batch.processing.chunk.size=10
batch.processing.concurrent.threads=2
batch.processing.progress.report.interval=5

# Report Generation
batch.report.enabled=true
batch.report.save.path=reports/face_extraction
batch.report.format=json

# Error Handling
batch.error.continue.on.failure=true
batch.error.max.failures.per.batch=50

# ===============================================
# PERFORMANCE MONITORING
# ===============================================

# Performance Metrics
performance.monitoring.enabled=true
performance.metrics.extraction.time=true
performance.metrics.api.calls=true

# Resource Management
resource.management.memory.limit=2048m
resource.management.temp.cleanup.enabled=true
resource.management.temp.cleanup.interval=3600000

# ===============================================
# SECURITY CONFIGURATION
# ===============================================

# API Security
api.security.rate.limit.enabled=true
api.security.rate.limit.requests.per.minute=30

# File Upload Security
file.upload.virus.scan.enabled=false
file.upload.max.file.size=10MB
file.upload.allowed.extensions=jpg,jpeg,png,webp

# ===============================================
# DEVELOPMENT/DEBUG CONFIGURATION
# ===============================================

# Debug Settings (set to false in production)
debug.python.script.output=true
debug.save.intermediate.results=true
debug.api.response.logging=true

# Development Tools
dev.tools.python.env.check.endpoint=true
dev.tools.extraction.test.endpoint=true
dev.tools.performance.profiling=false

